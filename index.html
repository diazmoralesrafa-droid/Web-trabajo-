<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Control de Presencia</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>Control de Presencia</h1>

<div class="container">

    <!-- Alta de trabajadores -->
    <section>
      <div class="container">
  <h2>Alta de Trabajadores</h2>
  <input type="text" id="dniTrabajador" placeholder="DNI">
  <input type="text" id="nombreTrabajador" placeholder="Nombre">
  <input type="text" id="telefonoTrabajador" placeholder="Teléfono">
  <input type="email" id="correoTrabajador" placeholder="Correo">
  <button id="btnRegistrarTrabajador">Registrar Trabajador</button>

  <!-- Contenedor donde se mostrará la lista de trabajadores -->
  <div id="listaTrabajadores"></div>
</div>
        <h2>Alta de Trabajador</h2>
        <form id="formTrabajador">
            <input type="text" id="dni" placeholder="DNI" required>
            <input type="text" id="nombre" placeholder="Nombre" required>
            <input type="tel" id="telefono" placeholder="Teléfono" required>
            <input type="email" id="correo" placeholder="Correo" required>
            <button type="submit">Dar de Alta</button>
        </form>
    </section>

    <!-- Control de presencia -->
    <section>
        <h2>Control de Presencia</h2>
        <form id="formPresencia">
            <input type="text" id="dniPresencia" placeholder="DNI" required>
            <input type="date" id="fecha" required>
            <input type="time" id="hora" required>
            <button type="submit">Registrar Presencia</button>
        </form>
    </section>

    <!-- Listado -->
    <section>
        <h2>Registros</h2>
        <div id="resultados"></div>
    </section>

</div>

<script src="app.js"></script>
</body>
    <script>
// ====================== Inicializar LocalStorage ======================
if(!localStorage.getItem('trabajadores')) localStorage.setItem('trabajadores','[]');
if(!localStorage.getItem('presencias')) localStorage.setItem('presencias','[]');

// ====================== Mostrar alertas ======================
function mostrarAlerta(elemento,mensaje,tipo){
  elemento.textContent = mensaje;
  elemento.className = 'alert '+(tipo==='success'?'alert-success':'alert-error');
  elemento.style.display='block';
  setTimeout(()=>{ elemento.style.display='none'; },3000);
}

// ====================== Registrar trabajador ======================
function registrarTrabajador(){
  let dni = document.getElementById('dniTrabajador').value.trim();
  let nombre = document.getElementById('nombreTrabajador').value.trim();
  let telefono = document.getElementById('telefonoTrabajador').value.trim();
  let correo = document.getElementById('correoTrabajador').value.trim();
  let alertBox = document.getElementById('alertTrabajador');

  if(!dni || !nombre || !telefono || !correo){
    mostrarAlerta(alertBox,"Completa todos los campos","error");
    return;
  }

  let trabajadores = JSON.parse(localStorage.getItem('trabajadores'));

  if(trabajadores.some(t=>t.dni===dni)){
    mostrarAlerta(alertBox,"El trabajador con este DNI ya existe","error");
    return;
  }

  trabajadores.push({dni,nombre,telefono,correo});
  localStorage.setItem('trabajadores',JSON.stringify(trabajadores));

  mostrarTrabajadores();
  mostrarAlerta(alertBox,"Trabajador registrado","success");

  // Limpiar campos
  document.getElementById('dniTrabajador').value='';
  document.getElementById('nombreTrabajador').value='';
  document.getElementById('telefonoTrabajador').value='';
  document.getElementById('correoTrabajador').value='';
}

// ====================== Mostrar lista de trabajadores ======================
function mostrarTrabajadores(){
  let lista = document.getElementById('listaTrabajadores');
  let trabajadores = JSON.parse(localStorage.getItem('trabajadores'));
  lista.innerHTML = '';
  trabajadores.forEach(t=>{
    lista.innerHTML += `<div class="list-item">${t.dni} - ${t.nombre} - ${t.telefono} - ${t.correo}</div>`;
  });
}

// ====================== Inicializar al cargar la página ======================
window.onload = mostrarTrabajadores;
</script>
</html>
