// Obtener datos del localStorage
let trabajadores = JSON.parse(localStorage.getItem("trabajadores")) || [];
let presencias = JSON.parse(localStorage.getItem("presencias")) || [];

// Alta de trabajadores
document.getElementById("formTrabajador").addEventListener("submit", function(e) {
    e.preventDefault();

    const trabajador = {
        dni: dni.value,
        nombre: nombre.value,
        telefono: telefono.value,
        correo: correo.value
    };

    trabajadores.push(trabajador);
    localStorage.setItem("trabajadores", JSON.stringify(trabajadores));

    alert("Trabajador dado de alta");
    this.reset();
});

// Control de presencia
document.getElementById("formPresencia").addEventListener("submit", function(e) {
    e.preventDefault();

    const presencia = {
        dni: dniPresencia.value,
        fecha: fecha.value,
        hora: hora.value
    };

    presencias.push(presencia);
    localStorage.setItem("presencias", JSON.stringify(presencias));

    alert("Presencia registrada");
    this.reset();
    mostrarRegistros();
});

// Mostrar registros
function mostrarRegistros() {
    const div = document.getElementById("resultados");
    div.innerHTML = "";

    presencias.forEach(p => {
        div.innerHTML += `
            <p>
                DNI: ${p.dni} | Fecha: ${p.fecha} | Hora: ${p.hora}
            </p>
        `;
    });
}

mostrarRegistros();